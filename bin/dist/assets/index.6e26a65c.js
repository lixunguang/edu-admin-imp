import{a as J,b as v,g as O,_ as K}from"./index.7142b2f1.js";/* empty css                *//* empty css                *//* empty css              *//* empty css               */import{d as X,e as m,bc as j,aF as x,bq as G,b2 as Q,aV as W,B as h,C as S,F as u,aN as D,aI as t,aH as o,aK as R,aJ as T,aM as Y,a$ as Z,bd as ee,bh as te,bi as oe,aD as b,aE as A,b9 as se,ba as ne}from"./arco.48f7a1aa.js";import{h as ae}from"./vue.c3d4857c.js";import"./chart.fdf0edf8.js";const i=y=>(se("data-v-40e52104"),y=y(),ne(),y),ue={class:"main"},le={class:"bbb"},re=["innerHTML"],ce=i(()=>u("h4",null,"\u70B9\u51FB\u4E0B\u9762\u94FE\u63A5\uFF0C\u8FDB\u5165\u505A\u5B9E\u9A8C\u9875\u9762:",-1)),ie=i(()=>u("a",{href:"IBESimdroidAutoSim://"},"\u70B9\u51FB\u8FD9\u91CC\u505A\u5B9E\u9A8C",-1)),de=i(()=>u("h4",null,"\u6559\u5E08\u5E03\u7F6E\u7684\u4F5C\u4E1A\u4FE1\u606F:",-1)),_e=i(()=>u("h4",null,"\u8981\u6C42:",-1)),fe=i(()=>u("p",null,"\u8BF7\u6839\u636E\u4E0B\u5217\u6587\u6863\u4E2D\u7684\u8981\u6C42\u5B8C\u6210\u4F5C\u4E1A\u3002",-1)),pe=i(()=>u("p",null,"1.0MB",-1)),me=["href"],he=i(()=>u("h4",null,"\u8BF4\u660E:",-1)),ge=["innerHTML"],we=i(()=>u("h4",null,"\u5B66\u751F\u63D0\u4EA4\u4F5C\u4E1A:",-1)),ve=i(()=>u("h4",null,"\u6750\u6599:",-1)),be=i(()=>u("h4",null,"\u5907\u6CE8\uFF1A",-1)),ye=X({__name:"index",setup(y){const g=ae(),N=m();(async function(){try{const e={id:Number(g.params.lessonId)},s=await v.post("/edu/v1/course/lesson/overview",e);N.value=s.data}catch(e){throw console.log(e),e}})();const I=m([]);(async function(){try{const e={id:Number(g.params.lessonId)},s=await v.post("/edu/v1/course/lesson/content",e);I.value=s.data}catch(e){throw console.log(e),e}})();const H=m([]);(async function(){try{const e={id:Number(g.params.lessonId)},s=await v.post("/edu/v1/course/lesson/refer",e);H.value=s.data}catch(e){throw console.log(e),e}})();const V=m();(async function(){try{const e={id:Number(g.params.lessonId)},s=await v.post("/edu/v1/course/lesson/experiment",e);V.value=s.data}catch(e){throw console.log(e),e}})();const C=m();(async function(){try{const e={id:Number(g.params.lessonId)},s=await v.post("/edu/v1/course/lesson/work",e);C.value=s.data}catch(e){throw console.log(e),e}})();const L=m(),M=J(),f=m([]),E=m({word:"\u8001\u5E08\u597D..."});(async function(){try{const e={lesson_id:Number(g.params.lessonId),login_id:String(M.$state.login_id)},s=await v.post("/edu/v1/course/lesson/work/commit",e);L.value=s.data;for(let n=0;n<s.data.work_commit_files.length;n+=1){const d=s.data.work_commit_files[n].file_name.split("/");f.value.push({uid:s.data.work_commit_files[n].content_id,name:d[d.length-1],url:s.data.work_commit_files[n].file_url})}E.value.word=s.data.work_commit_message}catch(e){throw console.log(e),e}})();const z=e=>{const{onProgress:s,onError:n,onSuccess:d,fileItem:a,name:_}=e,l=new XMLHttpRequest;l.upload&&(l.upload.onprogress=function(p){let c;p.total>0&&(c=p.loaded/p.total),s(c,p)}),l.onerror=function(c){n(c)},l.onload=function(){if(l.status<200||l.status>=300)return n(l.responseText);const c=JSON.parse(l.responseText),B=c.data[0].url.split("/");return f.value.push({uid:c.data[0].id,name:B[B.length-1],url:c.data[0].url}),d(l.response)};const k=new FormData,F=String(O());return k.append(_||"file",a.file),l.open("post","/edu/v1/upload_files",!0),l.setRequestHeader("Authorization",F),l.send(k),{abort(){l.abort()}}},$=e=>{const{uid:s}=e;for(let n=0;n<f.value.length;n+=1)Number(f.value[n].uid)===Number(s)&&f.value.splice(n,1);return new Promise((n,d)=>{Z.confirm({title:"on-before-remove",content:`\u786E\u8BA4\u5220\u9664 ${e.name}`,onOk:()=>n(!0),onCancel:()=>d(new Error("cancel"))})})},P=async function(){try{const e={login_id:String(M.$state.login_id),lesson_id:Number(g.params.lessonId),work_commit_files:[{content_id:0}],work_commit_message:E.value.word};e.work_commit_files.splice(0,1);for(let n=0;n<f.value.length;n+=1)e.work_commit_files.push({content_id:Number(f.value[n].uid)});const s=await v.post("/edu/v1/course/lesson/work/commit/add",e);window.location.reload()}catch(e){throw console.log(e),e}};return(e,s)=>{var q;const n=ee,d=j,a=te,_=oe,l=x("icon-file"),k=x("icon-file-pdf"),F=x("icon-language"),p=G,c=Q,B=W;return h(),S("div",ue,[u("h3",null,D((q=N.value)==null?void 0:q.lesson_title),1),t(d,{"default-active-key":"1",size:"large"},{default:o(()=>[t(n,{key:"1",title:"\u6559\u5B66\u5185\u5BB9"},{default:o(()=>[t(d,{"default-active-key":"0",size:"medium"},{default:o(()=>[(h(!0),S(R,null,T(I.value,(r,w)=>(h(),b(n,{key:w,title:r.title},{default:o(()=>[u("div",le,[u("p",{innerHTML:r==null?void 0:r.content},null,8,re)])]),_:2},1032,["title"]))),128))]),_:1})]),_:1}),t(n,{key:"3",title:"\u505A\u5B9E\u9A8C"},{default:o(()=>[u("div",null,[t(_,null,{default:o(()=>[ce,t(a,{offset:1,span:22},{default:o(()=>[ie]),_:1})]),_:1})])]),_:1}),t(n,{key:"4",title:"\u63D0\u4EA4\u4F5C\u4E1A"},{default:o(()=>[u("div",null,[t(_,null,{default:o(()=>{var r;return[t(a,null,{default:o(()=>[de]),_:1}),t(a,{offset:1,span:22},{default:o(()=>[_e]),_:1}),t(a,{offset:2,span:20},{default:o(()=>[fe]),_:1}),(h(!0),S(R,null,T((r=C.value)==null?void 0:r.content,(w,U)=>(h(),b(a,{key:U,span:12,offset:2},{default:o(()=>[t(_,null,{default:o(()=>[w.content_type==2?(h(),b(a,{key:0,span:2},{default:o(()=>[t(l,{style:{fontSize:"32px"}})]),_:1})):A("",!0),w.content_type==3?(h(),b(a,{key:1,span:2},{default:o(()=>[t(k,{style:{fontSize:"32px"}})]),_:1})):A("",!0),w.content_type==7?(h(),b(a,{key:2,span:2},{default:o(()=>[t(F,{style:{fontSize:"32px"}})]),_:1})):A("",!0),t(a,{span:6},{default:o(()=>[u("p",null,D(w.title),1)]),_:2},1024),t(a,{span:5,offset:1},{default:o(()=>[pe]),_:1}),t(a,{span:5,offset:1,class:"ccc"},{default:o(()=>[u("a",{href:w.content},"\u4E0B\u8F7D",8,me)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]}),_:1}),t(_,null,{default:o(()=>[t(a,{offset:1,span:22},{default:o(()=>[he]),_:1}),t(a,{offset:2,span:20},{default:o(()=>{var r;return[u("p",{innerHTML:(r=C.value)==null?void 0:r.requirement},null,8,ge)]}),_:1})]),_:1})]),t(_,null,{default:o(()=>[t(a,null,{default:o(()=>[we]),_:1}),t(a,{offset:1,span:22},{default:o(()=>[ve]),_:1}),t(a,{offset:2,span:20},{default:o(()=>[t(_,null,{default:o(()=>[t(p,{"custom-request":z,"file-list":f.value,onBeforeRemove:$},null,8,["file-list"])]),_:1})]),_:1})]),_:1}),t(_,null,{default:o(()=>[t(a,{offset:1,span:22},{default:o(()=>[be]),_:1}),t(a,{offset:2,span:20},{default:o(()=>[t(c,{modelValue:E.value.word,"onUpdate:modelValue":s[0]||(s[0]=r=>E.value.word=r),placeholder:"please enter your username...",style:{border:"1px solid black"}},null,8,["modelValue"]),t(B,{type:"primary","html-type":"\u63D0\u4EA4",onClick:P},{default:o(()=>[Y("\u63D0\u4EA4")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});const Te=K(ye,[["__scopeId","data-v-40e52104"]]);export{Te as default};
