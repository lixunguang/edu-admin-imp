import{a as q,g as E,b as T,_ as D}from"./index.682428fc.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               */import{d as M,e as F,aH as A,B as P,C as U,aI as e,aG as o,F as y,aM as d,aN as $,u as j,a$ as x,bh as H,b2 as O,be as z,bm as G,bc as J,aW as W,bj as X,bi as K,b9 as Q,ba as Y}from"./arco.572a1b40.js";import{f as Z}from"./vue.adf857d5.js";import"./chart.f83c6245.js";const ee=f=>(Q("data-v-5a4cb1bc"),f=f(),Y(),f),te={class:"container"},oe=ee(()=>y("p",null,"\u57FA\u672C\u4FE1\u606F",-1)),ae={style:{marginLeft:"40px"}},ue=M({__name:"add",setup(f){const w=Z(),B=q(),c=F({title:"\u8BF7\u8F93\u5165\u6807\u9898...",desc:"\u8BF7\u8F93\u5165\u63CF\u8FF0..."}),{login_id:N,user_id:S}=B,p=F([]),m=F([]);let b=0;const V=s=>{b=1},L=s=>{b=2},C=s=>{const{onProgress:u,onError:t,onSuccess:a,fileItem:v,name:r}=s,n=new XMLHttpRequest;n.upload&&(n.upload.onprogress=function(i){let l;i.total>0&&(l=i.loaded/i.total),u(l,i)}),n.onerror=function(l){t(l)},n.onload=function(){if(n.status<200||n.status>=300)return t(n.responseText);const l=JSON.parse(n.responseText);return b===1?p.value.push({uid:l.data[0].id,url:l.data[0].url}):b===2&&m.value.push({uid:l.data[0].id,url:l.data[0].url}),a(n.response)};const _=new FormData,h=String(E());return _.append(r||"file",v.file),n.open("post","/admin/upload_files",!0),n.setRequestHeader("Authorization",h),n.send(_),{abort(){n.abort()}}},R=s=>{const{uid:u}=s;for(let t=0;t<p.value.length;t+=1)Number(p.value[t].uid)===Number(u)&&p.value.splice(t,1);return new Promise((t,a)=>{x.confirm({title:"on-before-remove",content:`\u786E\u8BA4\u5220\u9664 ${s.name}`,onOk:()=>t(!0)})})},I=s=>{const{uid:u}=s;for(let t=0;t<m.value.length;t+=1)Number(m.value[t].uid)===Number(u)&&m.value.splice(t,1);return new Promise((t,a)=>{x.confirm({title:"on-before-remove",content:`\u786E\u8BA4\u5220\u9664 ${s.name}`,onOk:()=>t(!0)})})},k=async function(){var s,u;try{const t={title:c.value.title,desc:c.value.desc,author_id:Number(S),picture_id:Number((s=p.value[0])==null?void 0:s.uid),vedio_id:Number((u=m.value[0])==null?void 0:u.uid)},a=await T.post("/admin/course/add",t);debugger;w.push({name:"SimuList"})}catch(t){throw console.log(t),t}};return(s,u)=>{const t=A("Breadcrumb"),a=H,v=O,r=z,n=G,_=J,h=W,i=X,l=K;return P(),U("div",te,[e(t,{items:["menu.mSimu","menu.mSimu.add"]},null,8,["items"]),e(l,null,{default:o(()=>[e(i,null,{default:o(()=>[oe,y("div",ae,[e(r,null,{default:o(()=>[e(a,{span:2},{default:o(()=>[d("\u6807\u9898")]),_:1}),e(a,{span:2},{default:o(()=>[e(v,{modelValue:c.value.title,"onUpdate:modelValue":u[0]||(u[0]=g=>c.value.title=g),style:{width:"320px"},"allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(a,{span:2},{default:o(()=>[d("\u63CF\u8FF0")]),_:1}),e(a,{span:2},{default:o(()=>[e(v,{modelValue:c.value.desc,"onUpdate:modelValue":u[1]||(u[1]=g=>c.value.desc=g),style:{width:"320px"},"allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(a,{span:2},{default:o(()=>[d("\u4F5C\u8005")]),_:1}),e(a,{span:2,style:{paddingLeft:"20px"}},{default:o(()=>[e(n,null,{default:o(()=>[d($(j(N)),1)]),_:1})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(a,{span:2},{default:o(()=>[d("\u5C01\u9762\u56FE")]),_:1}),e(a,{span:4},{default:o(()=>[e(_,{"custom-request":C,limit:1,onBeforeRemove:R,onChange:V})]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(a,{span:2},{default:o(()=>[d("\u5C01\u9762\u89C6\u9891")]),_:1}),e(a,{span:4},{default:o(()=>[e(_,{"custom-request":C,limit:1,onBeforeRemove:I,onChange:L})]),_:1})]),_:1})]),e(r,null,{default:o(()=>[e(a,{span:2,offset:11},{default:o(()=>[e(h,{type:"primary",onClick:u[2]||(u[2]=g=>k())},{default:o(()=>[d(" \u4FDD\u5B58 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});const ge=D(ue,[["__scopeId","data-v-5a4cb1bc"]]);export{ge as default};
